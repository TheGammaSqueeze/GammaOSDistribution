<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (C) 2021 The Android Open Source Project

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->
<!-- This AndroidTest.xml is mostly autogenerated, except for the
     line adding -no-window-animation. If you remove this file, you
     can find the autogenerated version in
     $OUT/testcases/CarUILibUnitTests/CarUILibUnitTests.config.
     Although not explicitly referenced from our Android.bp, it is
     picked up and used instead of the autogenerated version as long
     as it has the name "AndroidTest.xml".

     -no-window-animation is needed because of the new sparkle
     animation on ripples. It causes espresso's
     onView(...).perform(click()) to fail, because normally it
     sends a touch down event, waits for idle, then sends a touch
     up event. The sparkle animation causes the system to never be
     idle, and thus the button will just be held down forever. -->
<configuration description="Runs Chassis Test Cases.">
    <option name="test-suite-tag" value="apct" />
    <option name="test-suite-tag" value="apct-instrumentation" />

    <target_preparer class="com.android.tradefed.targetprep.suite.SuiteApkInstaller">
        <option name="cleanup-apks" value="true" />
        <option name="test-file-name" value="CarUILibUnitTests.apk" />
    </target_preparer>

    <test class="com.android.tradefed.testtype.AndroidJUnitTest" >
        <option name="package" value="com.android.car.ui.test" />
        <option name="runner" value="androidx.test.runner.AndroidJUnitRunner" />
        <option name="instrumentation-arg" key="thisisignored" value="thisisignored --no-window-animation" />
    </test>
</configuration>
